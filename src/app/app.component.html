<div class="container">

  <input
    type="text"
    name=""
    placeholder="Cerca..."
    class="form-control"
    [(ngModel)]="keySearch">

  <hr>
  <app-book
    *ngFor="let product of products | filterProduct : keySearch"
    [theBook]="product"
    (em)="updateCart(product)">
  </app-book>

  <hr>
  <!-- cart -->
  <div class="card card-body bg-light mb-3" *ngIf="cart.length > 0">
    <h3 class="mb-3">Cart</h3>
      <ul>
        <li *ngFor="let c of cart">{{ c.name }} - Prezzo unitario: <b>&euro; {{ c.price }}</b>. Quantit&agrave; scelta: {{ c.qty_chosen }}</li>
      </ul>
  </div>

  <!-- spese di spedizione -->
  <div class="card card-body bg-light" *ngIf="cart.length > 0">
    <h3 class="mb-3">Shipping</h3>
    <div class="radio">
      <label for=""><input type="radio" name="shipping" (click)="addShipping(2.99)"> DHL Express (&euro; 2.99)
      </label>
    </div>
    <div class="radio">
      <label for=""><input type="radio" name="shipping" (click)="addShipping(9.99)"> USPS Express (&euro; 9.99)
      </label>
    </div>
    <div class="radio">
      <label for=""><input type="radio" name="shipping" (click)="addShipping(12.99)"> Express Courier (&euro; 12.99)
      </label>
    </div>
  </div>

  <!-- totale -->
  <div class="text-right mt-3">
    <h2>Totale &euro; {{ total }}</h2>
  </div>

    <!-- Button trigger modal -->
    <div class="row mt-5 mb-3">
      <div class="col-sm-12">
        <button
          type="button"
          class="btn btn-primary btn-lg btn-block"
          data-toggle="modal"
          data-target="#purchase"
          [disabled]="cart.length == 0">
          Purchase
        </button>
      </div>
  </div>

  <div class="row mb-5">
      <div class="col-sm-12">
          <button class="btn btn-danger btn-lg btn-block" type="button" (click)="emptyCart()">
              Empty Cart
          </button>
      </div>
  </div>

<!-- Modal -->
<div class="modal fade" id="purchase" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="purchaseLabel">Checkout</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>You're going to purchase the following books:</p>
          <ul class="mt-3">
            <li *ngFor="let c of cart">{{ c.name }}</li>
          </ul>
          <p>Proceed with Checkout?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" (click)="checkout()" data-dismiss="modal">Purchase</button>
      </div>
    </div>
  </div>
</div>
</div> <!-- end container -->

